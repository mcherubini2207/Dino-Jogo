<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>T-Rex Adventure Combat</title>
    <style>
        body { text-align: center; font-family: 'Arial', sans-serif; background: #1a1a1a; color: white; margin: 0; overflow: hidden; touch-action: manipulation; }
        canvas { background: #2c3e50; border-bottom: 5px solid #27ae60; display: block; margin: 0 auto; width: 100%; max-width: 600px; height: auto; }
        .controls { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 8px; padding: 10px; max-width: 600px; margin: 0 auto; }
        button { padding: 15px 5px; font-size: 14px; border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; min-height: 60px; }
        .btn-move { background: #7f8c8d; } /* Bot√µes de andar */
        .btn-jump { background: #3498db; }
        .btn-atk { background: #e74c3c; }
        .stats { font-size: 18px; margin: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="stats">HP: <span id="hp" style="color: #2ecc71;">100</span> | Pontos: <span id="score">0</span></div>
    <canvas id="gameCanvas" width="600" height="250"></canvas>
    
    <div class="controls">
        <button class="btn-move" onmousedown="move(-5)" onmouseup="move(0)" ontouchstart="move(-5)" ontouchend="move(0)">‚¨ÖÔ∏è</button>
        <button class="btn-move" onmousedown="move(5)" onmouseup="move(0)" ontouchstart="move(5)" ontouchend="move(0)">‚û°Ô∏è</button>
        <button class="btn-jump" onclick="jump()">PULO ‚¨ÜÔ∏è</button>
        <button class="btn-atk" onclick="attack('mordida')">MORDIDA ü¶∑</button>
        <button class="btn-atk" style="background: #f1c40f; color: black;" onclick="attack('rugido')">RUGIDO üì¢</button>
        <button class="btn-atk" style="background: #e67e22;" onclick="attack('rabada')">RABADA ü¶¥</button>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        
        let hp = 100;
        let score = 0;
        let bossActive = false;
        let dino = { x: 50, y: 180, w: 50, h: 50, dx: 0, dy: 0, jump: -12, gravity: 0.7, grounded: true, action: "" };
        let enemies = [];
        let projectiles = [];
        let items = [];

        function move(speed) { dino.dx = speed; }
        function jump() { if(dino.grounded) { dino.dy = dino.jump; dino.grounded = false; } }

        function attack(type) {
            dino.action = type;
            setTimeout(() => { dino.action = ""; }, 300);
            if(type === 'rugido') projectiles.push({x: dino.x + 40, y: dino.y + 10, speed: 8, type: 'wave'});
            
            enemies.forEach((en) => {
                let dist = Math.abs((en.x) - (dino.x));
                if(type === 'mordida' && dist < 80) en.hp -= 35;
                if(type === 'rabada' && dist < 110) en.hp -= 60;
            });
        }

        function update() {
            // Movimento Horizontal
            dino.x += dino.dx;
            if(dino.x < 0) dino.x = 0;
            if(dino.x > 550) dino.x = 550;

            // Gravidade e Pulo
            dino.dy += dino.gravity;
            dino.y += dino.dy;
            if (dino.y > 180) { dino.y = 180; dino.dy = 0; dino.grounded = true; }

            // Spawns
            if (Math.random() < 0.005) items.push({ x: Math.random() * 500, y: -50, dy: 2 });
            if (!bossActive && Math.random() < 0.01) enemies.push({ x: 600, y: 180, hp: 100, shootTimer: 0, type: 'normal' });

            if (score >= 100 && !bossActive) {
                bossActive = true;
                setTimeout(() => { enemies.push({ x: 500, y: 130, hp: 1000, shootTimer: 0, type: 'boss' }); }, 2000);
            }

            // L√≥gica de Itens (Cura)
            items.forEach((it, i) => {
                it.y += it.dy;
                if(Math.abs(it.x - dino.x) < 40 && Math.abs(it.y - dino.y) < 40) {
                    hp = Math.min(100, hp + 20);
                    items.splice(i, 1);
                }
            });

            // Tiros e Inimigos
            projectiles.forEach((p, pi) => {
                p.x += p.speed;
                enemies.forEach((en) => {
                    if(p.x > en.x && p.x < en.x + 60) { en.hp -= 20; projectiles.splice(pi, 1); }
                });
            });

            enemies.forEach((en, i) => {
                if(en.type === 'normal') en.x -= 2;
                en.shootTimer++;
                if(en.shootTimer > 80) {
                    projectiles.push({x: en.x, y: en.y + 20, speed: -5, type: 'fire'});
                    en.shootTimer = 0;
                }
                
                if(en.hp <= 0) { enemies.splice(i, 1); score += 20; if(en.type === 'boss') alert("VENCEU!"); }
                if(en.x < -100) enemies.splice(i, 1);
            });

            // Colis√£o com fogo
            projectiles.forEach((p, pi) => {
                if(p.type === 'fire' && Math.abs(p.x - dino.x) < 30 && Math.abs(p.y - dino.y) < 50) {
                    hp -= 5;
                    projectiles.splice(pi, 1);
                }
            });

            document.getElementById("hp").innerText = hp;
            document.getElementById("score").innerText = score;
            if(hp <= 0) { alert("Game Over!"); location.reload(); }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.font = "50px Arial";
            ctx.fillText("ü¶ñ", dino.x, dino.y + 40);
            if(dino.action) ctx.fillText("üí•", dino.x + 40, dino.y + 20);
            items.forEach(it => ctx.fillText("üçñ", it.x, it.y));
            enemies.forEach(en => {
                ctx.font = (en.type === 'boss' ? "90px" : "50px") + " Arial";
                ctx.fillText(en.type === 'boss' ? "üëë" : "üêâ", en.x, en.y + 40);
            });
            projectiles.forEach(p => ctx.fillText(p.type === 'fire' ? "üî•" : "üîµ", p.x, p.y + 20));
        }

        function loop() { update(); draw(); requestAnimationFrame(loop); }
        loop();
    </script>
</body>
</html>
